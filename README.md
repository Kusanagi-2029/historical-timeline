# historical-timeline - Приложение для отрисовки временных отрезков и слайдера

- [Описание проекта](#описание-проекта)
  - [Технологии](#технологии)
  - [Скрипты](#скрипты)
  - [DEMO](#demo)
    - [DEMO](#demo)
    - [Видео](#видео)
    - [Анимация](#анимация)
      - [TimelineContainer](#timelinecontainer)
      - [updateDatesWithAnimation](#updatedateswithanimation)
    - [Прочее](#прочее)
- [Установка и запуск](#установка-и-запуск)
- [Архитектура проекта](#архитектура-проекта)
  - [Структура директорий](#структура-директорий)
  - [Модульная архитектура](#модульная-архитектура)
  - [Container-presenter pattern](#container-presenter-pattern)

## Описание проекта

## Технологии

● Использованы:

- Typescript
- React.js
- SCSS-стили
- Сборка проекта с помощью Webpack
- Библиотека Swiper - для слайдера
- Для реализации js-анимаций были использованы ts и scss
- Линтер ESLint - для code conventions
- Prettier - для форматирования
- Yarn
- Библиотека react-router-dom - для роутинга
- Библиотека @babel/plugin-proposal-private-property-in-object - для babel и webpack

● Не были использованы:

- JQuery
- Bootstrap, Tailwind и т.п.
- Библиотеки UI-компонентов - MaterialUI, AntDesign и т.п.

## Скрипты

### `yarn install`

Установка зависимостей

### `yarn start`

```bash
yarn install
yarn start
```

Приложение запустится на [http://localhost:3000](http://localhost:3000)

### `yarn build`

```bash
yarn build
yarn add -g serve
serve -s build
```

Билд запустится на [http://localhost:3000](http://localhost:3000)

### `yarn test`

Запуск тестов приложения

### `yarn eject`

> [!CAUTION]
> Это неотвратимая операция `eject`!

### DEMO

### Видео

### Анимация

в компоненте `TimelineContainer` реализована анимация, которая включает в себя:

- Плавное изменение значений дат с помощью функции `updateDatesWithAnimation`.
- Изменение стилей кругов и текстов, связанных с временными отрезками, для визуального обозначения активного периода.
- Взаимодействие с пользователем через обработчики событий, которые добавляют динамику при наведении курсора.

### TimelineContainer

1. **Обновление дат с анимацией**:

   - Функция `updateDatesWithAnimation` вызывается внутри эффекта `useEffect`, когда активный период изменяется. Эта функция отвечает за плавное изменение значений начальной и конечной дат временного отрезка.
   - Анимация осуществляется путем постепенного изменения значений `startDate` и `endDate` от текущих значений до новых значений, полученных из данных о периоде.
   - Каждое обновление значений происходит с интервалом в 20 миллисекунд, что создает эффект анимации.

2. **Изменение стилей элементов**:

   - Внутри `useEffect` происходит изменение стилей для кружков и текстов, связанных с временными отрезками:
     - Кружки, представляющие временные отрезки, изменяют радиус (`r`) в зависимости от того, активен ли соответствующий период. Если период активен, радиус кружка увеличивается до `16`, в противном случае устанавливается в `2`.
     - Тексты, связанные с временными отрезками, изменяют свою непрозрачность (`opacity`) в зависимости от того, активен ли период. Если период активен, непрозрачность текста устанавливается в `1`, в противном случае — в `0`.

3. **Обработчики событий наведения мыши**:
   - Обработчики `handleMouseEnter` и `handleMouseLeave` добавляют дополнительную анимацию при наведении курсора на кружки:
     - При наведении на кружок его радиус увеличивается, а текст становится видимым.
     - При уходе курсора радиус кружка возвращается к исходному значению, а текст становится невидимым.

Да, в функции `updateDatesWithAnimation` реализована анимация изменения дат. Давайте подробно рассмотрим, как работает эта анимация.

### updateDatesWithAnimation

1. **Извлечение года из строки даты**:

   - Вспомогательная функция `parseYear` извлекает год из строки даты. Если строка не является числом, возвращается 0.

2. **Инициализация текущих и целевых значений дат**:

   - Переменные `currentStartYear` и `currentEndYear` хранят текущие значения начальной и конечной дат соответственно.
   - Переменные `targetStartYear` и `targetEndYear` содержат целевые значения начальной и конечной дат.

3. **Установка интервала обновления**:

   - Переменная `updateInterval` устанавливает интервал между обновлениями анимации в миллисекундах.

4. **Запуск интервала анимации**:
   - Функция `setInterval` запускает таймер, который будет вызываться каждые `updateInterval` миллисекунд.
   - Внутри интервала происходит обновление текущих значений дат в зависимости от целевых значений:
     - Если `currentStartYear` не равен `targetStartYear`, он увеличивается или уменьшается на 1 в зависимости от того, меньше или больше текущее значение по сравнению с целевым.
     - Если `currentEndYear` не равен `targetEndYear`, он также увеличивается или уменьшается на 1 в зависимости от соотношения с целевым значением.
     - Функции `setStartDate` и `setEndDate` вызываются для обновления значений начальной и конечной дат соответственно.
   - Когда `currentStartYear` становится равным `targetStartYear` и `currentEndYear` становится равным `targetEndYear`, интервал останавливается с помощью `clearInterval`.

### Прочее

#### Отключение zoom'a при двойном тапе в мобильном устройстве:

`touch-action: manipulation;`

#### Подключение шрифта Bebas Neue:

1. 1-ый способ Подключения шрифта Bebas Neue - в index.html
 <!-- <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue:wght@400&display=swap" rel="stylesheet">
-->
2. 2-ой способ Подключения шрифта Bebas Neue - через import в CSS-файл напрямую
   `@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue:wght@400&display=swap');`

3. 3-ий способ Подключения шрифта Bebas Neue - через import в CSS/SCSS-файл и подключение его к входной точке проекта - `src/index.js` или `src/App.js`:

   ```scss
   @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue:wght@400&display=swap');
   ```

   ```tsx
   import './shared/styles/fonts.scss';

   // Замените на путь к вашему файлу стилей
   ```

4. 4-ый способ Подключения шрифта Bebas Neue - импорт из другого css/scss-файла
   Установить файл в проект:
   `afternpm install @fontsource/bebas-neue`

   ```tsx
   import '@fontsource/bebas-neue';

   // Импортируйте шрифт в ваш JS/JSX файл
   ```

5. 5-ый способ - прямой импорт из другого CSS|SCSS;
   `@import '/src/shared/styles/fonts.scss';`

   Но должны быть настроены Webpack и tsconfig:

```js
// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.scss$/,
        use: ['style-loader', 'css-loader', 'sass-loader'],
      },
    ],
  },
};
```

```js
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": "./src",
    "paths": {
      "@/*": ["*"]
    }
  }
}

```

### Видео

Для демонстрации изолированности логики и вёрстки одинаковых блоков компонента был введён компонент страницы `threeBlocksPage`, на которую можно перейти по кнопке "На 3 блока" или по адресу приложения /3.

```tsx
/**
 * Компонент страницы с Тремя блоками временных отрезков для демонстрации изолированности их логики и вёрстки
 */
const threeBlocksPage: React.FC = () => {
  const navigate = useNavigate();

  /** Обработчик навигации */
  const handleNavigate = (path: string) => {
    navigate(path);
  };
  return (
    <div className={styles.threeBlocksPage}>
      <div className={styles.toMainPageButton}>
        <NavButton text="На Главную" onClick={() => handleNavigate('/')} />
      </div>
      <TimelineBlock id="timeline1" />
      <TimelineBlock id="timeline2" />
      <TimelineBlock id="timeline3" />
    </div>
  );
};

export default threeBlocksPage;
```

## Установка и запуск

## Доступные скрипты

## Архитектура проекта

### Структура директорий

### Модульная архитектура

### Container-presenter pattern

